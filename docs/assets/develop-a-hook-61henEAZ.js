import{u as r,j as s,C as n}from"./index-phq109e0.js";import"./HomePage.css.js.vanilla-w40geAFS.js";const d={title:"开发一个 Hook",description:"undefined"};function e(i){const l={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",...r(),...i.components};return s.jsxs(s.Fragment,{children:[s.jsx(l.header,{children:s.jsxs(l.h1,{id:"开发一个-hook",children:["开发一个 Hook",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#开发一个-hook",children:s.jsx(l.div,{"data-autolink-icon":!0})})]})}),`
`,s.jsx(l.p,{children:"在本指南中，我们将开发一个用于集中流动性池的 Hook。同样的步骤也适用于流动性书池。我们将从介绍 Hook 模板开始，然后逐步指导。"}),`
`,s.jsxs(l.h2,{id:"hooks-模板",children:["Hooks 模板",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#hooks-模板",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.p,{children:["请访问 ",s.jsx(l.a,{href:"https://github.com/pancakeswap/pancake-v4-hooks-template",children:"https://github.com/pancakeswap/pancake-v4-hooks-template"})," 获取 Hook 模板。点击 ",s.jsx(l.code,{children:"Use this template"})," 创建一个基于该模板的新仓库。"]}),`
`,s.jsxs(l.p,{children:["该模板需要 Foundry。如果你没有安装 Foundry，请按照 ",s.jsx(l.a,{href:"https://book.getfoundry.sh/getting-started/installation",children:"安装指南"})," 操作。"]}),`
`,s.jsx(l.p,{children:"将新仓库克隆到本地环境后，运行以下命令："}),`
`,s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{children:"> forge install // 安装依赖"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{children:"> forge test // 运行仓库中的现有测试"})})]})}),`
`,s.jsxs(l.p,{children:["在 ",s.jsx(l.code,{children:"src"})," 和 ",s.jsx(l.code,{children:"test"})," 下各有两个文件夹：",s.jsx(l.code,{children:"pool-cl"})," 和 ",s.jsx(l.code,{children:"pool-bin"}),"。如果你在为集中流动性池开发，请专注于 pool-cl 文件夹，否则为流动性书池类型开发请专注于 pool-bin 文件夹。"]}),`
`,s.jsxs(l.h3,{id:"basehook",children:["BaseHook",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#basehook",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(l.p,{children:"BaseHook 是一个基本合约，你可以继承它以创建你的 hooks。它提供"}),`
`,s.jsxs(l.ol,{children:[`
`,s.jsxs(l.li,{children:["帮助方法： ",s.jsx(l.code,{children:"_hooksRegistrationBitmapFrom"})," 用于设置所需的回调"]}),`
`,s.jsx(l.li,{children:"回调方法：供你覆盖"}),`
`]}),`
`,s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// 来自 CLCounterHook.sol 的代码片段"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./CLBaseHook.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" CLCounterHook"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" is"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"  constructor"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"ICLPoolManager"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _poolManager) "}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(_poolManager) {}"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"  // 1. 设置所需的回调。在这种情况下，需要 4 个回调"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"  function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getHooksRegistrationBitmap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" pure"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" override"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint16"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    return"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _hooksRegistrationBitmapFrom"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        Permissions"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            beforeInitialize"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            afterInitialize"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            beforeAddLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            afterAddLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            beforeRemoveLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            afterRemoveLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            beforeSwap"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            afterSwap"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            beforeDonate"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            afterDonate"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            noOp"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        })"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    );"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"  // 2. 对于每个所需回调，覆盖该方法"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"  function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" beforeAddLiquidity"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" key"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"ICLPoolManager"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"ModifyLiquidityParams"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" override"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" poolManagerOnly"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes4"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"      // 实现 hook 逻辑后返回选择器"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"      return"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" this"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:".beforeAddLiquidity.selector;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "})]})}),`
`,s.jsxs(l.h2,{id:"逐步指南",children:["逐步指南",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#逐步指南",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.p,{children:["我们将开发一个 Hook，使 ",s.jsx(l.a,{href:"https://docs.pancakeswap.finance/products/vecake/what-is-vecake",children:"veCake"})," 持有者在通过带此 Hook 的池进行交换时享受 50% 交换费折扣。"]}),`
`,s.jsxs(l.h3,{id:"步骤-1下载-hook-模板",children:["步骤 1：下载 Hook 模板",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#步骤-1下载-hook-模板",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.ol,{children:[`
`,s.jsxs(l.li,{children:["从 pancake-v4-hooks-template 创建一个新仓库：",s.jsx(l.a,{href:"https://github.com/new?template_name=pancake-v4-hooks-template&template_owner=pancakeswap",children:"点击这里"})]}),`
`,s.jsxs(l.li,{children:["将仓库克隆到本地并运行 ",s.jsx(l.code,{children:"forge install"})," 和 ",s.jsx(l.code,{children:"forge test"})," 验证设置。"]}),`
`]}),`
`,s.jsxs(l.h3,{id:"步骤-2实现思路",children:["步骤 2：实现思路",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#步骤-2实现思路",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(l.p,{children:"流程如下："}),`
`,s.jsxs(l.ol,{children:[`
`,s.jsxs(l.li,{children:["在交换之前，CLPoolManager 会调用 ",s.jsx(l.code,{children:"hook.beforeSwap()"}),"。"]}),`
`,s.jsxs(l.li,{children:["在 ",s.jsx(l.code,{children:"beforeSwap()"})," 中，hook 调用 ",s.jsx(l.code,{children:"CLPoolManager.updateDynamicSwapFee()"})," 来更新交换费。这就是我们的 hook 将交换费更新为 50% 折扣或默认费用的地方。"]}),`
`]}),`
`,s.jsx(l.p,{children:s.jsx(l.img,{src:"/pancake-developer/v4/guides-develop-hook-1.png",alt:"高层次"})}),`
`,s.jsxs(l.h3,{id:"步骤-3实现-hook",children:["步骤 3：实现 Hook",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#步骤-3实现-hook",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(l.p,{children:"我们将进行以下操作："}),`
`,s.jsxs(l.ol,{children:[`
`,s.jsxs(l.li,{children:["添加 ",s.jsx(l.code,{children:"beforeSwap"})," 权限"]}),`
`,s.jsxs(l.li,{children:["在 ",s.jsx(l.code,{children:"beforeSwap()"})," 中调用 ",s.jsx(l.code,{children:"poolManager.updateDynamicSwapFee(key, swapFee)"})]}),`
`]}),`
`,s.jsx(l.p,{children:"逐步实现"}),`
`,s.jsxs(l.div,{"data-vocs-steps":"true",children:[s.jsxs(l.div,{"data-depth":"4",children:[s.jsxs(l.h4,{id:"31-添加-beforeswap-权限",children:["3.1 添加 ",s.jsx(l.code,{children:"beforeSwap"})," 权限",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#31-添加-beforeswap-权限",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),s.jsxs(l.p,{children:["在 ",s.jsx(l.code,{children:"src/pool-cl/VeCakeDiscountHook.sol"})," 文件中实现以下内容。Hook 合约扩展自 ",s.jsx(l.code,{children:"CLBaseHook"})," 和 ",s.jsx(l.code,{children:"ICLDynamicFeeManager"}),"。"]}),s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed has-focused",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line focused",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" VeCakeDiscountHook"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" is"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { "})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getHooksRegistrationBitmap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" pure"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" override"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint16"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _hooksRegistrationBitmapFrom"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"            Permissions"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeInitialize"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterInitialize"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeAddLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterAddLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeRemoveLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterRemoveLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line focused",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeSwap"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterSwap"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeDonate"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterDonate"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                noOp"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            })"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        );"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})]}),s.jsxs(l.div,{"data-depth":"4",children:[s.jsxs(l.h4,{id:"32-在-beforeswap-中调用-poolmanagerupdatedynamicswapfeekey-swapfee",children:["3.2 在 ",s.jsx(l.code,{children:"beforeSwap()"})," 中调用 ",s.jsx(l.code,{children:"poolManager.updateDynamicSwapFee(key, swapFee)"}),s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#32-在-beforeswap-中调用-poolmanagerupdatedynamicswapfeekey-swapfee",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),s.jsxs(l.p,{children:["我们在上一步中指定了 ",s.jsx(l.code,{children:"beforeSwap"})," 权限。因此，CLPoolManager 会在交换之前调用 ",s.jsx(l.code,{children:"hook.beforeSwap"}),` 方法。\r
现在，我们将实现 `,s.jsx(l.code,{children:"beforeSwap"})," 方法，调用 ",s.jsx(l.code,{children:"poolManager.updateDynamicSwapFee(key, swapFee)"}),"。"]}),s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" beforeSwap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" key"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"ICLPoolManager"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"SwapParams"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    external"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    override"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"    poolManagerOnly"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes4"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"{"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" swapFee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getDefaultSwapFee"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(key);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // 如果用户是 veCake 持有者，则给予 50% 的折扣。"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    if"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (veCake."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"tx"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:".origin) "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:">="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 1"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" eth) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        swapFee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" swapFee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"/"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 2"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    poolManager."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"updateDynamicSwapFee"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(key, swapFee);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    return"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" this"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:".beforeSwap.selector;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/// "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@return"}),s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" 池的默认交换费"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getDefaultSwapFee"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" key"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"internal"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    return"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" key.fee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SwapFeeLibrary.STATIC_FEE_MASK;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})]})]}),`
`,s.jsxs("details",{children:[s.jsxs("summary",{children:["查看 ",s.jsx(l.code,{children:"VeCakeDiscountHook"})," 完整源代码"]}),s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"src/pool-cl/VeCakeDiscountHook.sol","data-lang":"solidity",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// SPDX-License-Identifier: UNLICENSED"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"pragma"}),s.jsx(l.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:" solidity"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ^0.8.24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/types/PoolKey.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"PoolId"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"PoolIdLibrary"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/types/PoolId.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"SwapFeeLibrary"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/libraries/SwapFeeLibrary.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"ICLPoolManager"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/pool-cl/interfaces/ICLPoolManager.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./CLBaseHook.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"interface"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" IVeCake"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" account"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" balance"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/// "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@notice"}),s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" VeCakeDiscountHook is a dynamic swap fee hook that provide swap fee discount for veCake holders"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"///         To keep this simple, so long swapper has >= 1 veCake, they will get 50% discount on swap fee"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" VeCakeDiscountHook"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" is"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    using"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" PoolIdLibrary"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" for"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" PoolKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    IVeCake veCake;"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    constructor"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"ICLPoolManager"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _poolManager, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _veCake) "}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"CLBaseHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(_poolManager) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        veCake "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" IVeCake"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(_veCake);"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getHooksRegistrationBitmap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" pure"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" override"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint16"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _hooksRegistrationBitmapFrom"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"            Permissions"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeInitialize"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterInitialize"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeAddLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterAddLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeRemoveLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterRemoveLiquidity"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeSwap"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterSwap"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                beforeDonate"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                afterDonate"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                noOp"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" false"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            })"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        );"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" beforeSwap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" key"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"ICLPoolManager"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"SwapParams"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        external"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        override"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        poolManagerOnly"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes4"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    {"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        uint24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" swapFee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getDefaultSwapFee"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(key);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        if"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (veCake."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"tx"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:".origin) "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:">="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 1"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            swapFee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" swapFee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"/"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 2"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        poolManager."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"updateDynamicSwapFee"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(key, swapFee);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" this"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:".beforeSwap.selector;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    /// "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@return"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" the"}),s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" default swap fee for the pool"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getDefaultSwapFee"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" key"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"internal"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" key.fee "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SwapFeeLibrary.STATIC_FEE_MASK;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})]}),`
`,s.jsxs(l.h3,{id:"步骤-4添加-hook-测试",children:["步骤 4：添加 Hook 测试",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#步骤-4添加-hook-测试",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(l.p,{children:"在测试中，我们将测试两种情景："}),`
`,s.jsxs(l.ol,{children:[`
`,s.jsx(l.li,{children:"作为普通用户进行交换"}),`
`,s.jsx(l.li,{children:"作为 veCake 持有者进行交换"}),`
`]}),`
`,s.jsx(n,{type:"warning",children:s.jsxs(l.p,{children:["断言已经简化，在实际应用中，你应该计算 ",s.jsx(l.code,{children:"amtOut"})," 并验证它。"]})}),`
`,s.jsxs(l.p,{children:["在 ",s.jsx(l.code,{children:"test/pool-cl/VeCakeDiscountHook.t.sol"})," 文件中实现以下内容："]}),`
`,s.jsxs("details",{children:[s.jsx("summary",{children:"在此查看完整源代码"}),s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"test/pool-cl/VeCakeDiscountHook.t.sol","data-lang":"solidity",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// SPDX-License-Identifier: UNLICENSED"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"pragma"}),s.jsx(l.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:" solidity"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ^0.8.24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "solmate/test/utils/mocks/MockERC20.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"Test"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "forge-std/Test.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"Constants"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/test/pool-cl/helpers/Constants.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"Currency"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/types/Currency.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"PoolKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/types/PoolKey.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"CLPoolParametersHelper"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/pool-cl/libraries/CLPoolParametersHelper.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"SwapFeeLibrary"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/libraries/SwapFeeLibrary.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"VeCakeDiscountHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "../../src/pool-cl/VeCakeDiscountHook.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"CLTestUtils"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./utils/CLTestUtils.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"CLPoolParametersHelper"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/pool-cl/libraries/CLPoolParametersHelper.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"PoolIdLibrary"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@pancakeswap/v4-core/src/types/PoolId.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"ICLSwapRouterBase"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "pancake-v4-periphery/src/pool-cl/interfaces/ICLSwapRouterBase.sol"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" VeCakeDiscountHookTest"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" is"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Test"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"CLTestUtils"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    using"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" PoolIdLibrary"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" for"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" PoolKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    using"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" CLPoolParametersHelper"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" for"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" bytes32"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    VeCakeDiscountHook hook;"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    Currency currency0;"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    Currency currency1;"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    PoolKey key;"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    MockERC20 veCake "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"veCake"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"veCake"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"18"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" alice "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" makeAddr"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"alice"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" setUp"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        (currency0, currency1) "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" deployContractsWithTokens"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        hook "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" VeCakeDiscountHook"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(poolManager, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(veCake));"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // create the pool key"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        key "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" PoolKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            currency0"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" currency0,"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            currency1"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" currency1,"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            hooks"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" hook,"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            poolManager"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" poolManager,"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"            // 0.3% fee for swapFee, however hook can overwrite the swapFee"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            fee"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SwapFeeLibrary.DYNAMIC_FEE_FLAG "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"+"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" uint24"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"3000"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"),"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"            // tickSpacing: 10"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            parameters"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" bytes32"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(hook."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"getHooksRegistrationBitmap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"()))."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"setTickSpacing"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"10"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        });"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // initialize pool at 1:1 price point"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        poolManager."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"initialize"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(key, Constants.SQRT_RATIO_1_1, "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"new"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" bytes"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"));"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // add deep liquidity so that swap fee discount can be observed"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(Currency."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"unwrap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(currency0))."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"this"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(Currency."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"unwrap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(currency1))."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"this"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        addLiquidity"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(key, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"-"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"60"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"60"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // approve from alice for swap in the test cases below"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"startPrank"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(alice);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(Currency."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"unwrap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(currency0))."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"approve"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(swapRouter), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"type"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:").max);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(Currency."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"unwrap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(currency1))."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"approve"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(swapRouter), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"type"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:").max);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"stopPrank"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" testNonVeCakeHolder"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" amtOut "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _swap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // amt out be at least 0.3% lesser due to swap fee"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        assertLe"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(amtOut, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0.997"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" testVeCakeHolder"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // mint alice veCake"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        veCake."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(alice), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"1"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" amtOut "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _swap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // amt out be at least 0.15% lesser due to swap fee"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        assertLe"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(amtOut, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0.9985"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        assertGe"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(amtOut, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0.997"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"); "}),s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// 0.15% swap fee, should be at least 0.997"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _swap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"internal"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" amtOut"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        MockERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(Currency."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"unwrap"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(currency0))."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(alice), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"1"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // set alice as tx.origin and mint alice token"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"prank"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(alice), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(alice));"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        amtOut "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" swapRouter."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"exactInputSingle"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            ICLSwapRouterBase."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"V4CLExactInputSingleParams"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                poolKey"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" key,"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                zeroForOne"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                recipient"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(alice),"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                amountIn"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 1"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ether"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                amountOutMinimum"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                sqrtPriceLimitX96"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                hookData"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" bytes"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            }),"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"            block"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:".timestamp"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        );"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})]}),`
`,s.jsxs(l.h3,{id:"步骤-5验证",children:["步骤 5：验证",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#步骤-5验证",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.p,{children:["运行 ",s.jsx(l.code,{children:"forge test"})," 验证测试通过。"]})]})}function o(i={}){const{wrapper:l}={...r(),...i.components};return l?s.jsx(l,{...i,children:s.jsx(e,{...i})}):e(i)}export{o as default,d as frontmatter};
